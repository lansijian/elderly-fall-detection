# 跌倒检测实时可视化系统

## 项目简介

这是一个基于Web的跌倒检测实时可视化系统，可以：
- 加载KFall数据集
- 实时显示传感器数据变化
- 进行状态预测（正常/跌倒）
- 提供交互式数据可视化

## 功能特点

### 🎯 核心功能
- **数据集管理**：自动扫描并加载可用的数据集
- **实时可视化**：动态显示加速度、陀螺仪、欧拉角数据
- **状态预测**：基于传感器数据实时预测当前状态
- **交互控制**：播放、暂停、停止、重置等控制功能

### 📊 可视化内容
- **加速度数据**：AccX、AccY、AccZ三轴加速度
- **陀螺仪数据**：GyrX、GyrY、GyrZ三轴角速度
- **欧拉角数据**：EulerX、EulerY、EulerZ姿态角
- **状态预测**：置信度和真实标签对比

### 🎮 控制功能
- **播放控制**：播放/暂停/停止/重置
- **进度控制**：滑块控制播放进度
- **数据集选择**：选择不同的数据集文件

## 安装说明

### 1. 环境要求
- Python 3.8+
- 现代浏览器（Chrome、Firefox、Safari、Edge）

### 2. 安装依赖
```bash
# 进入项目目录
cd web_app

# 安装Python依赖
pip install -r requirements.txt
```

### 3. 数据准备
确保KFall数据集位于正确位置：
```
项目根目录/
├── KFall Dataset/
│   └── split_data/
│       ├── sitting/
│       │   ├── train.csv
│       │   ├── val.csv
│       │   └── test.csv
│       └── walking/
│           ├── train.csv
│           ├── val.csv
│           └── test.csv
└── web_app/
    ├── app.py
    ├── templates/
    └── ...
```

## 运行说明

### 1. 启动服务器
```bash
# 在web_app目录下运行
python app.py
```

### 2. 访问系统
打开浏览器访问：`http://localhost:5000`

### 3. 使用步骤
1. **选择数据集**：从下拉菜单选择要分析的数据集
2. **加载数据**：点击"加载数据"按钮
3. **开始可视化**：使用播放控制按钮开始数据可视化
4. **观察结果**：查看实时数据变化和状态预测

## 系统架构

### 后端 (Flask)
- **app.py**：主应用文件，包含所有API接口
- **数据加载**：自动扫描和加载CSV文件
- **状态预测**：基于传感器数据的简单规则判断
- **API接口**：提供数据访问和状态预测服务

### 前端 (HTML + JavaScript)
- **index.html**：主页面，包含所有UI组件
- **Chart.js**：用于数据可视化图表
- **Axios**：用于API调用
- **响应式设计**：适配不同屏幕尺寸

### API接口
- `GET /api/datasets`：获取可用数据集列表
- `POST /api/load_data`：加载指定数据集
- `GET /api/frame_data/<frame_id>`：获取指定帧数据
- `GET /api/range_data/<start>/<end>`：获取指定范围数据

## 技术特点

### 🚀 性能优化
- **数据缓存**：避免重复加载大文件
- **图表优化**：限制数据点数量，保持流畅显示
- **异步加载**：非阻塞式数据加载

### 🎨 用户体验
- **现代化UI**：渐变背景、圆角设计、阴影效果
- **实时反馈**：状态卡片颜色变化、进度显示
- **交互友好**：滑块控制、按钮状态反馈

### 🔧 可扩展性
- **模块化设计**：前后端分离，易于扩展
- **配置灵活**：可调整播放速度、图表样式等
- **模型集成**：预留模型加载接口，可集成训练好的SVM

## 故障排除

### 常见问题

1. **数据集加载失败**
   - 检查文件路径是否正确
   - 确认CSV文件格式正确
   - 检查文件权限

2. **图表显示异常**
   - 刷新页面重新加载
   - 检查浏览器控制台错误信息
   - 确认Chart.js库加载成功

3. **播放卡顿**
   - 减少图表数据点数量
   - 降低播放速度
   - 检查系统资源使用情况

### 调试模式
启动时添加调试信息：
```bash
python app.py --debug
```

## 未来改进

### 功能增强
- [ ] 集成训练好的SVM模型
- [ ] 添加更多传感器数据源
- [ ] 支持实时数据流接入
- [ ] 添加数据导出功能

### 性能优化
- [ ] 数据压缩和缓存
- [ ] WebSocket实时通信
- [ ] 图表渲染优化
- [ ] 内存使用优化

### 用户体验
- [ ] 多语言支持
- [ ] 主题切换
- [ ] 移动端适配
- [ ] 快捷键支持

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 许可证

MIT License 